!function(){"use strict";var e,t,n,c,r,o,a,i,l,s,d,u,f,m,v,p;m=document.querySelectorAll(".main-slider .slide"),v=0,p=function(e,t){return e[t].classList.add("dn"),++t>=e.length&&(t=0),e[t].classList.remove("dn"),t},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3;setInterval((function(){v=p(e,v)}),t)}(m,5e3),a=document.querySelector(".services-slider"),i=a.querySelector(".services-slider-wrapper"),l=a.querySelectorAll(".slide"),s=l.offsetWidth,d=l[0].offsetWidth,u=Math.floor(s/d),f=0,window.addEventListener("resize",(function(){s=a.offsetWidth,d=l[0].offsetWidth,u=Math.floor(s/d)})),a.addEventListener("click",(function(e){e.preventDefault();var t=e.target;if(t.matches(".slider-arrow")||t.parentNode.matches(".slider-arrow"))if(t.parentNode.matches(".prev")||t.matches(".prev")){var n=l[l.length-1].cloneNode(!0);i.prepend(n),l[l.length-1].remove(),l=a.querySelectorAll(".slide"),f=f>0?--f:0}else if(t.parentNode.matches(".next")||t.matches(".next")){var c=l[0].cloneNode(!0);i.append(c),l[0].remove(),l=a.querySelectorAll(".slide"),f=f<l.length-u?++f:l.length-u}})),function(){for(var e=document.querySelector(".gallery-slider"),t=e.querySelectorAll(".slide"),n=e.querySelector(".slider-dots"),c=0;c<t.length;c++){var r=document.createElement("li"),o=document.createElement("button");r.classList.add("dot"),r.append(o),0===c&&r.classList.add("slick-active"),n.append(r)}var a,i=n.querySelectorAll(".dot"),l=0,s=function(e,t,n){e[t].classList.remove(n)},d=function(e,t,n){e[t].classList.add(n)},u=function(){s(t,l,"slide-active"),s(i,l,"slick-active"),++l>=t.length&&(l=0),d(t,l,"slide-active"),d(i,l,"slick-active")},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3;a=setInterval(u,e)};e.addEventListener("click",(function(e){e.preventDefault();var n=e.target;(n.matches(".slider-arrow, .dot")||n.parentNode.matches(".slider-arrow, .dot"))&&(s(t,l,"slide-active"),s(i,l,"slick-active"),n.parentNode.matches(".prev")||n.matches(".prev")?l--:n.parentNode.matches(".next")||n.matches(".next")?l++:n.parentNode.matches(".dot")&&i.forEach((function(e,t){e===n.parentNode&&(l=t)})),l>=t.length&&(l=0),l<0&&(l=t.length-1),d(t,l,"slide-active"),d(i,l,"slick-active"))})),e.addEventListener("mouseover",(function(e){e.target.matches(".slider-arrow, .dot")&&clearInterval(a)})),e.addEventListener("mouseout",(function(e){e.target.matches(".slider-arrow, .dot")&&f(5e3)})),f(5e3)}(),r=document.querySelector(".clubs-list"),o=r.querySelector("ul"),r.addEventListener("click",(function(){o.classList.toggle("db")})),t=document.querySelector(".top-menu"),n=document.querySelector(".fixed-gift"),c=document.getElementById("totop"),window.addEventListener("scroll",(function(){screen.width<=768&&window.pageYOffset>t.offsetTop?(t.classList.add("fixed"),n&&(n.style.top="".concat(15+t.offsetHeight,"px"))):(t.classList.remove("fixed"),n&&(n.style.top="")),window.pageYOffset>document.querySelector("header").offsetHeight?c.classList.add("db"):c.classList.remove("db")})),function(){var e=document.querySelector(".right"),t=document.querySelector(".fixed-gift"),n=document.getElementById("free_visit_form"),c=document.getElementById("callback_form"),r=document.getElementById("gift"),o=function(e){screen.width,e.style.display="block"},a=function(e,t){var n=e.target;(n.classList.contains("overlay")||n.classList.contains("close-form")||n.classList.contains("close_icon")||n.classList.contains("close-btn"))&&(t.style.display="")};e.addEventListener("click",(function(e){var t=e.target;t.classList.contains("open-popup")?o(n):t.classList.contains("callback-btn")&&o(c)})),t&&t.addEventListener("click",(function(){o(r),t.style.display="none"})),n.addEventListener("click",(function(e){a(e,n)})),c.addEventListener("click",(function(e){a(e,c)})),r&&r.addEventListener("click",(function(e){a(e,r)}))}(),e=document.querySelector(".popup-menu"),document.querySelector(".menu-button").addEventListener("click",(function(){e.classList.add("df")})),e.addEventListener("click",(function(t){var n=t.target;(n.parentNode.matches(".close-menu-btn")||n.parentNode.matches(".scroll"))&&e.classList.remove("df")}));var h,y,g,E,L,b,k=(h=document.querySelectorAll("form"),y=document.querySelectorAll("input[type=tel]"),g=document.querySelector(".price-message > input"),E=new Set,L=function(e){var t=e.target;t.value=t.value.replace(/^[^0-9+]*/g,"").replace(/\D*$/g,"").replace(/^\++/g,"+").replace(/\(+/g,"(").replace(/\)+/g,")"),t.value.length?(t.value.length>10||t.value.length<17)&&-1===t.value.search(/^(\+7|8)(\(\d{3}\)|-?\d{3}-?)(\d{3}-?\d{2}-?\d{2}|\d{2}-\d{2}-\d{3})$/)?(t.style.border="2px solid red",E.add(t.id)):(t.style.border="",E.delete(t.id)):E.add(t.id)},b=function(e){var t=e.target;"name"===t.name?t.parentNode.classList.contains("price-message")?t.value=t.value.replace(/[^а-яё0-9a-z ]/gi,""):t.value=t.value.replace(/[^а-яё ]/gi,""):"phone"===t.name&&(t.value=t.value.replace(/[^0-9+\-()]/gi,""))},h.forEach((function(e){e.addEventListener("input",b)})),y.forEach((function(e){e.addEventListener("blur",L)})),g&&g.addEventListener("blur",(function(){g.value=g.value.trim()})),E);(function(){if("main"===document.querySelector("html").id){var e=document.getElementById("card_order"),t=e.querySelectorAll(".club > input"),n=function(t,n){var c=document.createElement("html");fetch(t).then((function(e){if(200!==e.status)throw new Error("status network not 200");return e.text()})).then((function(e){return c.innerHTML=e,function(e,t){var n=e.querySelectorAll(t),c=[];return n.forEach((function(e,t){c[t]=e.textContent.slice(0,-1)})),c[3]=c[4],c}(c,n)})).then((function(t){!function(t){var n=e.querySelectorAll(".time > input"),c=document.getElementById("price-total"),r=e.querySelector(".price-message > input"),o=function(){var e=0;n.forEach((function(n,c){n.checked&&(e=t[c])})),"ТЕЛО2020"===r.value.toUpperCase().trim()&&(e=Math.ceil(.7*e)),c.textContent=e};o(),n.forEach((function(e){e.addEventListener("change",o)})),r.addEventListener("blur",o)}(t)})).catch((function(e){console.error(e)}))};t.forEach((function(e){e.checked&&n("./".concat(e.value,".html"),".cards-types > label > .cost"),e.addEventListener("change",(function(){e.checked&&n("./".concat(e.value,".html"),".cards-types > label > .cost")}))}))}})(),function(e){var t="Что-то пошло не так... Пожалуйста, перезагрузите страницу или попробуйте позднее.",n="Необходимо Ваше согласие на передачу данных",c="Введены некоректные данные",r="Пожалуйста, выберите клуб!",o=document.createElement("div"),a=document.createElement("div"),i=document.createElement("div"),l=document.createElement("div");l.classList.add("status-message"),o.className="sk-wandering-cubes",a.className="sk-cube",i.className="sk-cube",a.classList.add("sk-cube-1"),i.classList.add("sk-cube-2"),o.insertAdjacentElement("afterbegin",i),o.insertAdjacentElement("afterbegin",a);var s=document.getElementById("banner-form"),d=document.getElementById("card_order"),u=document.getElementById("footer_form"),f=document.getElementById("form1"),m=document.getElementById("form2"),v=function(e){return fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})},p=function(a,i){var s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];a.preventDefault(),i.appendChild(l);var d=i.querySelector(".personal-data > input"),u=i.querySelectorAll("input[name=club-name]"),f=function(e){var n=document.getElementById("thanks"),c=n.querySelector(".form-content > p");d&&(d.checked=!1),e||(c.textContent=t),s&&(s.style.display=""),n.style.display="block",n.addEventListener("click",(function(e){var t=e.target;(t.classList.contains("overlay")||t.classList.contains("close-form")||t.classList.contains("close_icon")||t.classList.contains("close-btn"))&&(n.style.display="")})),setTimeout((function(){n.style.display=""}),3e3)};if(e.size)l.textContent=c;else if(!d||d.checked){if(u.length){var m=!1;if(u.forEach((function(e){e.checked&&(m=!0)})),!m)return void(l.textContent=r)}l.textContent="",l.insertAdjacentElement("afterbegin",o);var p={},h=new FormData(i);h.forEach((function(e,t){p[t]=e})),v(p).then((function(e){if(200!==e.status)throw new Error("status network not 200");l.textContent="",i.querySelectorAll("input[type=text]").forEach((function(e){e.value=""})),i.querySelectorAll("input[type=tel]").forEach((function(e){e.value=""})),f(!0)})).catch((function(e){l.textContent="",f(!1),console.error(e)}))}else l.textContent=n};s.addEventListener("submit",(function(e){p(e,s)})),d.addEventListener("submit",(function(e){p(e,d)})),u.addEventListener("submit",(function(e){p(e,u)})),f.addEventListener("submit",(function(e){p(e,f,document.getElementById("callback_form"))})),m.addEventListener("submit",(function(e){p(e,m,document.getElementById("free_visit_form"))}))}(k)}();