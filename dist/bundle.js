!function(){"use strict";var e,t,n,c,r,o,a,i,s,d,l,u,m,f,v,h;f=document.querySelectorAll(".main-slider .slide"),v=0,h=function(e,t){return e[t].classList.add("dn"),++t>=e.length&&(t=0),e[t].classList.remove("dn"),t},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3;setInterval((function(){v=h(e,v)}),t)}(f,5e3),a=document.querySelector(".services-slider"),i=a.querySelector(".services-slider-wrapper"),s=a.querySelectorAll(".slide"),d=s.offsetWidth,l=s[0].offsetWidth,u=Math.floor(d/l),m=0,window.addEventListener("resize",(function(){d=a.offsetWidth,l=s[0].offsetWidth,u=Math.floor(d/l)})),a.addEventListener("click",(function(e){e.preventDefault();var t=e.target;if(t.matches(".slider-arrow")||t.parentNode.matches(".slider-arrow"))if(t.parentNode.matches(".prev")||t.matches(".prev")){var n=s[s.length-1].cloneNode(!0);i.prepend(n),s[s.length-1].remove(),s=a.querySelectorAll(".slide"),m=m>0?--m:0}else if(t.parentNode.matches(".next")||t.matches(".next")){var c=s[0].cloneNode(!0);i.append(c),s[0].remove(),s=a.querySelectorAll(".slide"),m=m<s.length-u?++m:s.length-u}})),function(){for(var e=document.querySelector(".gallery-slider"),t=e.querySelectorAll(".slide"),n=e.querySelector(".slider-dots"),c=0;c<t.length;c++){var r=document.createElement("li"),o=document.createElement("button");r.classList.add("dot"),r.append(o),0===c&&r.classList.add("slick-active"),n.append(r)}var a,i=n.querySelectorAll(".dot"),s=0,d=function(e,t,n){e[t].classList.remove(n)},l=function(e,t,n){e[t].classList.add(n)},u=function(){d(t,s,"slide-active"),d(i,s,"slick-active"),++s>=t.length&&(s=0),l(t,s,"slide-active"),l(i,s,"slick-active")},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3;a=setInterval(u,e)};e.addEventListener("click",(function(e){e.preventDefault();var n=e.target;(n.matches(".slider-arrow, .dot")||n.parentNode.matches(".slider-arrow, .dot"))&&(d(t,s,"slide-active"),d(i,s,"slick-active"),n.parentNode.matches(".prev")||n.matches(".prev")?s--:n.parentNode.matches(".next")||n.matches(".next")?s++:n.parentNode.matches(".dot")&&i.forEach((function(e,t){e===n.parentNode&&(s=t)})),s>=t.length&&(s=0),s<0&&(s=t.length-1),l(t,s,"slide-active"),l(i,s,"slick-active"))})),e.addEventListener("mouseover",(function(e){e.target.matches(".slider-arrow, .dot")&&clearInterval(a)})),e.addEventListener("mouseout",(function(e){e.target.matches(".slider-arrow, .dot")&&m(5e3)})),m(5e3)}(),r=document.querySelector(".clubs-list"),o=r.querySelector("ul"),r.addEventListener("click",(function(){o.classList.toggle("db")})),t=document.querySelector(".top-menu"),n=document.querySelector(".fixed-gift"),c=document.getElementById("totop"),window.addEventListener("scroll",(function(){screen.width<=768&&window.pageYOffset>t.offsetTop?(t.classList.add("fixed"),n&&(n.style.top="".concat(15+t.offsetHeight,"px"))):(t.classList.remove("fixed"),n&&(n.style.top="")),window.pageYOffset>document.querySelector("header").offsetHeight?c.classList.add("db"):c.classList.remove("db")})),function(){var e=document.querySelector(".right"),t=document.querySelector(".fixed-gift"),n=document.getElementById("free_visit_form"),c=document.getElementById("callback_form"),r=document.getElementById("gift"),o=function(e){screen.width,e.style.display="block"},a=function(e,t){var n=e.target;(n.classList.contains("overlay")||n.classList.contains("close-form")||n.classList.contains("close_icon")||n.classList.contains("close-btn"))&&(t.style.display="")};e.addEventListener("click",(function(e){var t=e.target;t.classList.contains("open-popup")?o(n):t.classList.contains("callback-btn")&&o(c)})),t&&t.addEventListener("click",(function(){o(r),t.style.display="none"})),n.addEventListener("click",(function(e){a(e,n)})),c.addEventListener("click",(function(e){a(e,c)})),r&&r.addEventListener("click",(function(e){a(e,r)}))}(),e=document.querySelector(".popup-menu"),document.querySelector(".menu-button").addEventListener("click",(function(){e.classList.add("df")})),e.addEventListener("click",(function(t){var n=t.target;(n.parentNode.matches(".close-menu-btn")||n.parentNode.matches(".scroll"))&&e.classList.remove("df")}));var p,E,g,y,L,b,k,S=(p=document.getElementById("form1"),E=document.getElementById("form2"),g=document.getElementById("banner-form"),y=document.getElementById("card_order"),L=document.getElementById("footer_form"),b=new Set,k=function(e){var t=e.target;"name"===t.name?t.parentNode.classList.contains("price-message")?t.value=t.value.replace(/[^а-яё0-9a-z ]/gi,""):t.value=t.value.replace(/[^а-яё ]/gi,""):"phone"===t.name&&(t.value=t.value.replace(/[^0-9+\-()]/gi,""))},p.addEventListener("input",k),E.addEventListener("input",k),g.addEventListener("input",k),y.addEventListener("input",k),L.addEventListener("input",k),b);(function(){if("main"===document.querySelector("html").id){var e=document.getElementById("card_order"),t=e.querySelectorAll(".club > input"),n=function(t,n){var c=document.createElement("html");fetch(t).then((function(e){if(200!==e.status)throw new Error("status network not 200");return e.text()})).then((function(e){return c.innerHTML=e,function(e,t){var n=e.querySelectorAll(t),c=[];return n.forEach((function(e,t){c[t]=e.textContent.slice(0,-1)})),c[3]=c[4],c}(c,n)})).then((function(t){!function(t){var n=e.querySelectorAll(".time > input"),c=document.getElementById("price-total"),r=e.querySelector(".price-message > input"),o=function(){var e=0;n.forEach((function(n,c){n.checked&&(e=t[c])})),"ТЕЛО2020"===r.value.trim()&&(e=Math.ceil(.7*e)),c.textContent=e};o(),n.forEach((function(e){e.addEventListener("change",o)})),r.addEventListener("blur",o)}(t)})).catch((function(e){console.error(e)}))};t.forEach((function(e){e.checked&&n("/".concat(e.value,".html"),".cards-types > label > .cost"),e.addEventListener("change",(function(){e.checked&&n("/".concat(e.value,".html"),".cards-types > label > .cost")}))}))}})(),function(e){var t=document.createElement("div"),n=document.createElement("div"),c=document.createElement("div"),r=document.createElement("div");r.classList.add("status-message"),t.className="sk-wandering-cubes",n.className="sk-cube",c.className="sk-cube",n.classList.add("sk-cube-1"),c.classList.add("sk-cube-2"),t.insertAdjacentElement("afterbegin",c),t.insertAdjacentElement("afterbegin",n);var o=document.getElementById("banner-form"),a=document.getElementById("card_order"),i=document.getElementById("footer_form"),s=document.getElementById("form1"),d=document.getElementById("form2"),l=function(n,c){if(n.preventDefault(),c.appendChild(r),e.size)r.textContent="Введены некоректные данные";else{r.textContent="",r.insertAdjacentElement("afterbegin",t);var o={};new FormData(c).forEach((function(e,t){o[t]=e})),function(e){return fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}(o).then((function(e){if(200!==e.status)throw new Error("status network not 200");r.textContent="Спасибо! Мы скоро с вами свяжемся!",c.querySelectorAll("input").forEach((function(e){e.value=""}))})).catch((function(e){r.textContent="Что-то пошло не так...",console.error(e)}))}};o.addEventListener("submit",(function(e){l(e,o)})),a.addEventListener("submit",(function(e){l(e,a)})),i.addEventListener("submit",(function(e){l(e,i)})),s.addEventListener("submit",(function(e){l(e,s)})),d.addEventListener("submit",(function(e){l(e,d)}))}(S)}();