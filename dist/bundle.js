!function(){"use strict";var e,t,n,c,o,r,a,i,s;a=document.querySelectorAll(".main-slider .slide"),i=0,s=function(e,t){return e[t].classList.add("dn"),++t>=e.length&&(t=0),e[t].classList.remove("dn"),t},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3;setInterval((function(){i=s(e,i)}),t)}(a,5e3),function(){for(var e=document.querySelector(".gallery-slider"),t=e.querySelectorAll(".slide"),n=e.querySelector(".slider-dots"),c=0;c<t.length;c++){var o=document.createElement("li"),r=document.createElement("button");o.classList.add("dot"),o.append(r),0===c&&o.classList.add("slick-active"),n.append(o)}var a,i=n.querySelectorAll(".dot"),s=0,d=function(e,t,n){e[t].classList.remove(n)},l=function(e,t,n){e[t].classList.add(n)},u=function(){d(t,s,"slide-active"),d(i,s,"slick-active"),++s>=t.length&&(s=0),l(t,s,"slide-active"),l(i,s,"slick-active")},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3;a=setInterval(u,e)};e.addEventListener("click",(function(e){e.preventDefault();var n=e.target;(n.matches(".slider-arrow, .dot")||n.parentNode.matches(".slider-arrow, .dot"))&&(d(t,s,"slide-active"),d(i,s,"slick-active"),n.parentNode.matches(".prev")||n.matches(".prev")?s--:n.parentNode.matches(".next")||n.matches(".next")?s++:n.parentNode.matches(".dot")&&i.forEach((function(e,t){e===n.parentNode&&(s=t)})),s>=t.length&&(s=0),s<0&&(s=t.length-1),l(t,s,"slide-active"),l(i,s,"slick-active"))})),e.addEventListener("mouseover",(function(e){e.target.matches(".slider-arrow, .dot")&&clearInterval(a)})),e.addEventListener("mouseout",(function(e){e.target.matches(".slider-arrow, .dot")&&m(5e3)})),m(5e3)}(),o=document.querySelector(".clubs-list"),r=o.querySelector("ul"),o.addEventListener("click",(function(){r.classList.toggle("db")})),t=document.querySelector(".top-menu"),n=document.querySelector(".fixed-gift"),c=document.getElementById("totop"),window.addEventListener("scroll",(function(){screen.width<=768&&window.pageYOffset>t.offsetTop?(t.classList.add("fixed"),n&&(n.style.top="".concat(15+t.offsetHeight,"px"))):(t.classList.remove("fixed"),n&&(n.style.top="")),window.pageYOffset>document.querySelector("header").offsetHeight?c.classList.add("db"):c.classList.remove("db")})),function(){var e=document.querySelector(".right"),t=document.querySelector(".fixed-gift"),n=document.getElementById("free_visit_form"),c=document.getElementById("callback_form"),o=document.getElementById("gift"),r=function(e){screen.width,e.style.display="block"},a=function(e,t){var n=e.target;(n.classList.contains("overlay")||n.classList.contains("close-form")||n.classList.contains("close_icon")||n.classList.contains("close-btn"))&&(t.style.display="")};e.addEventListener("click",(function(e){var t=e.target;t.classList.contains("open-popup")?r(n):t.classList.contains("callback-btn")&&r(c)})),t&&t.addEventListener("click",(function(){r(o),t.style.display="none"})),n.addEventListener("click",(function(e){a(e,n)})),c.addEventListener("click",(function(e){a(e,c)})),o&&o.addEventListener("click",(function(e){a(e,o)}))}(),e=document.querySelector(".popup-menu"),document.querySelector(".menu-button").addEventListener("click",(function(){e.classList.add("df")})),e.addEventListener("click",(function(t){var n=t.target;(n.parentNode.matches(".close-menu-btn")||n.parentNode.matches(".scroll"))&&e.classList.remove("df")}));var d,l,u,m,f,v,E,p=(d=document.getElementById("form1"),l=document.getElementById("form2"),u=document.getElementById("banner-form"),m=document.getElementById("card_order"),f=document.getElementById("footer_form"),v=new Set,E=function(e){var t=e.target;"name"===t.name?t.parentNode.classList.contains("price-message")?t.value=t.value.replace(/[^а-яё0-9a-z ]/gi,""):t.value=t.value.replace(/[^а-яё ]/gi,""):"phone"===t.name&&(t.value=t.value.replace(/[^0-9+\-()]/gi,""))},d.addEventListener("input",E),l.addEventListener("input",E),u.addEventListener("input",E),m.addEventListener("input",E),f.addEventListener("input",E),v);(function(){if("main"===document.querySelector("html").id){var e=document.getElementById("card_order"),t=e.querySelectorAll(".club > input"),n=function(t,n){var c=document.createElement("html");fetch(t).then((function(e){if(200!==e.status)throw new Error("status network not 200");return e.text()})).then((function(e){return c.innerHTML=e,function(e,t){var n=e.querySelectorAll(t),c=[];return n.forEach((function(e,t){c[t]=e.textContent.slice(0,-1)})),c[3]=c[4],c}(c,n)})).then((function(t){!function(t){var n=e.querySelectorAll(".time > input"),c=document.getElementById("price-total"),o=e.querySelector(".price-message > input"),r=function(){var e=0;n.forEach((function(n,c){n.checked&&(e=t[c])})),"ТЕЛО2020"===o.value.trim()&&(e=Math.ceil(.7*e)),c.textContent=e};r(),n.forEach((function(e){e.addEventListener("change",r)})),o.addEventListener("blur",r)}(t)})).catch((function(e){console.error(e)}))};t.forEach((function(e){e.checked&&n("/".concat(e.value,".html"),".cards-types > label > .cost"),e.addEventListener("change",(function(){e.checked&&n("/".concat(e.value,".html"),".cards-types > label > .cost")}))}))}})(),function(e){var t=document.createElement("div"),n=document.createElement("div"),c=document.createElement("div"),o=document.createElement("div");o.classList.add("status-message"),t.className="sk-wandering-cubes",n.className="sk-cube",c.className="sk-cube",n.classList.add("sk-cube-1"),c.classList.add("sk-cube-2"),t.insertAdjacentElement("afterbegin",c),t.insertAdjacentElement("afterbegin",n);var r=document.getElementById("banner-form"),a=document.getElementById("card_order"),i=document.getElementById("footer_form"),s=document.getElementById("form1"),d=document.getElementById("form2"),l=function(n,c){if(n.preventDefault(),c.appendChild(o),e.size)o.textContent="Введены некоректные данные";else{o.textContent="",o.insertAdjacentElement("afterbegin",t);var r={};new FormData(c).forEach((function(e,t){r[t]=e})),function(e){return fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}(r).then((function(e){if(200!==e.status)throw new Error("status network not 200");o.textContent="Спасибо! Мы скоро с вами свяжемся!",c.querySelectorAll("input").forEach((function(e){e.value=""}))})).catch((function(e){o.textContent="Что-то пошло не так...",console.error(e)}))}};r.addEventListener("submit",(function(e){l(e,r)})),a.addEventListener("submit",(function(e){l(e,a)})),i.addEventListener("submit",(function(e){l(e,i)})),s.addEventListener("submit",(function(e){l(e,s)})),d.addEventListener("submit",(function(e){l(e,d)}))}(p)}();