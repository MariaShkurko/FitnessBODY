!function(){"use strict";var e,t,n,c,r,o,a,s,l,i,d,u,f,m,v,p;m=document.querySelectorAll(".main-slider .slide"),v=0,p=function(e,t){return e[t].classList.add("dn"),++t>=e.length&&(t=0),e[t].classList.remove("dn"),t},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3;setInterval((function(){v=p(e,v)}),t)}(m,5e3),a=document.querySelector(".services-slider"),s=a.querySelector(".services-slider-wrapper"),l=a.querySelectorAll(".slide"),i=l.offsetWidth,d=l[0].offsetWidth,u=Math.floor(i/d),f=0,window.addEventListener("resize",(function(){i=a.offsetWidth,d=l[0].offsetWidth,u=Math.floor(i/d)})),a.addEventListener("click",(function(e){e.preventDefault();var t=e.target;if(t.matches(".slider-arrow")||t.parentNode.matches(".slider-arrow"))if(t.parentNode.matches(".prev")||t.matches(".prev")){var n=l[l.length-1].cloneNode(!0);s.prepend(n),l[l.length-1].remove(),l=a.querySelectorAll(".slide"),f=f>0?--f:0}else if(t.parentNode.matches(".next")||t.matches(".next")){var c=l[0].cloneNode(!0);s.append(c),l[0].remove(),l=a.querySelectorAll(".slide"),f=f<l.length-u?++f:l.length-u}})),function(){for(var e=document.querySelector(".gallery-slider"),t=e.querySelectorAll(".slide"),n=e.querySelector(".slider-dots"),c=0;c<t.length;c++){var r=document.createElement("li"),o=document.createElement("button");r.classList.add("dot"),r.append(o),0===c&&r.classList.add("slick-active"),n.append(r)}var a,s=n.querySelectorAll(".dot"),l=0,i=function(e,t,n){e[t].classList.remove(n)},d=function(e,t,n){e[t].classList.add(n)},u=function(){i(t,l,"slide-active"),i(s,l,"slick-active"),++l>=t.length&&(l=0),d(t,l,"slide-active"),d(s,l,"slick-active")},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3;a=setInterval(u,e)};e.addEventListener("click",(function(e){e.preventDefault();var n=e.target;(n.matches(".slider-arrow, .dot")||n.parentNode.matches(".slider-arrow, .dot"))&&(i(t,l,"slide-active"),i(s,l,"slick-active"),n.parentNode.matches(".prev")||n.matches(".prev")?l--:n.parentNode.matches(".next")||n.matches(".next")?l++:n.parentNode.matches(".dot")&&s.forEach((function(e,t){e===n.parentNode&&(l=t)})),l>=t.length&&(l=0),l<0&&(l=t.length-1),d(t,l,"slide-active"),d(s,l,"slick-active"))})),e.addEventListener("mouseover",(function(e){e.target.matches(".slider-arrow, .dot")&&clearInterval(a)})),e.addEventListener("mouseout",(function(e){e.target.matches(".slider-arrow, .dot")&&f(5e3)})),f(5e3)}(),r=document.querySelector(".clubs-list"),o=r.querySelector("ul"),r.addEventListener("click",(function(){o.classList.toggle("db")})),t=document.querySelector(".top-menu"),n=document.querySelector(".fixed-gift"),c=document.getElementById("totop"),window.addEventListener("scroll",(function(){screen.width<=768&&window.pageYOffset>t.offsetTop?(t.classList.add("fixed"),n&&(n.style.top="".concat(15+t.offsetHeight,"px"))):(t.classList.remove("fixed"),n&&(n.style.top="")),window.pageYOffset>document.querySelector("header").offsetHeight?c.classList.add("db"):c.classList.remove("db")})),function(){var e=document.querySelector(".right"),t=document.querySelector(".fixed-gift"),n=document.getElementById("free_visit_form"),c=document.getElementById("callback_form"),r=document.getElementById("gift"),o=function(e){screen.width,e.style.display="block"},a=function(e,t){var n=e.target;(n.classList.contains("overlay")||n.classList.contains("close-form")||n.classList.contains("close_icon")||n.classList.contains("close-btn"))&&(t.style.display="")};e.addEventListener("click",(function(e){var t=e.target;t.classList.contains("open-popup")?o(n):t.classList.contains("callback-btn")&&o(c)})),t&&t.addEventListener("click",(function(){o(r),t.style.display="none"})),n.addEventListener("click",(function(e){a(e,n)})),c.addEventListener("click",(function(e){a(e,c)})),r&&r.addEventListener("click",(function(e){a(e,r)}))}(),e=document.querySelector(".popup-menu"),document.querySelector(".menu-button").addEventListener("click",(function(){e.classList.add("df")})),e.addEventListener("click",(function(t){var n=t.target;(n.parentNode.matches(".close-menu-btn")||n.parentNode.matches(".scroll"))&&e.classList.remove("df")}));var h,g,y,E,L,b,k=(h=document.querySelectorAll("form"),g=document.querySelectorAll("input[type=tel]"),y=document.querySelector(".price-message > input"),E=new Set,L=function(e){var t=e.target;t.value=t.value.replace(/^[^0-9+]*/g,"").replace(/\D*$/g,"").replace(/^\++/g,"+").replace(/\(+/g,"(").replace(/\)+/g,")"),t.value.length?(t.value.length>10||t.value.length<17)&&-1===t.value.search(/^(\+7|8)(\(\d{3}\)|-?\d{3}-?)(\d{3}-?\d{2}-?\d{2}|\d{2}-\d{2}-\d{3})$/)?(t.style.border="2px solid red",E.add(t.id)):(t.style.border="",E.delete(t.id)):E.add(t.id)},b=function(e){var t=e.target;"name"===t.name?t.parentNode.classList.contains("price-message")?t.value=t.value.replace(/[^а-яё0-9a-z ]/gi,""):t.value=t.value.replace(/[^а-яё ]/gi,""):"phone"===t.name&&(t.value=t.value.replace(/[^0-9+\-()]/gi,""))},h.forEach((function(e){e.addEventListener("input",b)})),g.forEach((function(e){e.addEventListener("blur",L)})),y&&y.addEventListener("blur",(function(){y.value=y.value.trim()})),E);(function(){if("main"===document.querySelector("html").id){var e=document.getElementById("card_order"),t=e.querySelectorAll(".club > input"),n=function(t,n){var c=document.createElement("html");fetch(t).then((function(e){if(200!==e.status)throw new Error("status network not 200");return e.text()})).then((function(e){return c.innerHTML=e,function(e,t){var n=e.querySelectorAll(t),c=[];return n.forEach((function(e,t){c[t]=e.textContent.slice(0,-1)})),c[3]=c[4],c}(c,n)})).then((function(t){!function(t){var n=e.querySelectorAll(".time > input"),c=document.getElementById("price-total"),r=e.querySelector(".price-message > input"),o=function(){var e=0;n.forEach((function(n,c){n.checked&&(e=t[c])})),"ТЕЛО2020"===r.value.toUpperCase().trim()&&(e=Math.ceil(.7*e)),c.textContent=e};o(),n.forEach((function(e){e.addEventListener("change",o)})),r.addEventListener("blur",o)}(t)})).catch((function(e){console.error(e)}))};t.forEach((function(e){e.checked&&n("/".concat(e.value,".html"),".cards-types > label > .cost"),e.addEventListener("change",(function(){e.checked&&n("/".concat(e.value,".html"),".cards-types > label > .cost")}))}))}})(),function(e){var t="Что-то пошло не так...",n="Ваша заявка отправлена. Мы свяжемся с вами в ближайшее время.",c="Необходимо Ваше согласие на передачу данных",r="Введены некоректные данные",o="Пожалуйста, выберите клуб!",a=document.createElement("div"),s=document.createElement("div"),l=document.createElement("div"),i=document.createElement("div");i.classList.add("status-message"),a.className="sk-wandering-cubes",s.className="sk-cube",l.className="sk-cube",s.classList.add("sk-cube-1"),l.classList.add("sk-cube-2"),a.insertAdjacentElement("afterbegin",l),a.insertAdjacentElement("afterbegin",s);var d=document.getElementById("banner-form"),u=document.getElementById("card_order"),f=document.getElementById("footer_form"),m=document.getElementById("form1"),v=document.getElementById("form2"),p=function(e){return fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})},h=function(s,l){var d=arguments.length>2&&void 0!==arguments[2]&&arguments[2];s.preventDefault(),l.appendChild(i);var u=l.querySelector(".personal-data > input"),f=l.querySelectorAll("input[name=club-name]");console.log(u);var m=function(e,c){if(u&&(u.checked=!1),e){var r=document.getElementById("thanks"),o=r.querySelector(".form-content > p");return c||(o.textContent=t),r.style.display="block",void r.addEventListener("click",(function(e){var t=e.target;(t.classList.contains("overlay")||t.classList.contains("close-form")||t.classList.contains("close_icon")||t.classList.contains("close-btn"))&&(r.style.display="")}))}var a=l.querySelector("h4").cloneNode(!0),s=document.createElement("button"),i=document.createElement("p");i.textContent=c?n:t,i.classList.add("text"),s.classList.add("btn"),s.classList.add("close-btn"),s.textContent="Ок",l.textContent="",l.append(a),l.append(i),l.append(s)};if(e.size)i.textContent=r;else if(!u||u.checked){if(f.length){var v=!1;if(f.forEach((function(e){console.log(e.checked),e.checked&&(v=!0)})),!v)return void(i.textContent=o)}i.textContent="",i.insertAdjacentElement("afterbegin",a);var h={},g=new FormData(l);g.forEach((function(e,t){h[t]=e})),p(h).then((function(e){if(200!==e.status)throw new Error("status network not 200");i.textContent="",m(d,!0),l.querySelectorAll("input").forEach((function(e){e.value=""}))})).catch((function(e){i.textContent="",m(d,!1),console.error(e)}))}else i.textContent=c};d.addEventListener("submit",(function(e){h(e,d,!0)})),u.addEventListener("submit",(function(e){h(e,u,!0)})),f.addEventListener("submit",(function(e){h(e,f,!0)})),m.addEventListener("submit",(function(e){h(e,m)})),v.addEventListener("submit",(function(e){h(e,v)}))}(k)}();